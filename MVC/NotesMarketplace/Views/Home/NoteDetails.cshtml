@model NotesMarketplace.Models.NoteDetails
@{
    ViewBag.Title = "Notes Details";
    if(@ViewBag.Header == "true")
    {
        Layout = "~/Views/Shared/RegistorCommon.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/NonRegisterCommon.cshtml";
    }
}

    <!-- Header Ends -->
    <!-- Detail Section -->
    <section id="notesdetail-detail">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-12 col-sm-12">
                    <div class="head">
                        <h3>Notes Details</h3>
                    </div>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-7">
                            <div class="row docenter">
                                <div class=" col-12 col-sm-5 col-md-5 col-lg-5 img-height">
                                    @{
                                        if (Model.notedetail.BookPicture != null)
                                        {
                                            <img class="img-fluid" src="~/Upload/BookPicture/@Model.notedetail.BookPicture">
                                        }
                                        else
                                        {
                                            <img class="img-fluid" src="@ViewBag.BookImage">
                                        }
                                    }

                                </div>
                                <div class="col-12 col-sm-7 col-md-7 col-lg-7 description">

                                    <h2>@Model.notedetail.Title</h2>
                                    <h5>@Model.notedetail.NoteType</h5>
                                    <p class="text-left">@Model.notedetail.NotesDescription</p>
                                    
                                    <div class="row">
                                        <div class="col-sm-12 col-md-7 col-lg-9">
                                            @if (@Model.notedetail.SellPrice == 0 || ViewBag.UserSelf == "true")
                                            {
                                                if (ViewBag.UserSelf == "true")
                                                {
                                                    <button type="submit" class="btn text-uppercase text-center" id="mybtn" name="Free" value="Free" onclick="location.href = '@Url.Action("NoteDetails","Home", new { NoteDetails = Model , sellprice= Model.notedetail.SellPrice })'"><b>Download</b></button>
                                                }
                                                else
                                                {
                                                    <button type="submit" class="btn text-uppercase text-center" id="mybtn" name="Free" value="Free" onclick="location.href = '@Url.Action("NoteDetails","Home", new { NoteDetails = Model , sellprice= Model.notedetail.SellPrice })'"><b>Free</b></button>
                                                }



                                            }
                                            else
                                            {
                                                if (ViewBag.Button == "true")
                                                {
                                                    <button type="submit" disabled class="btn text-uppercase text-center" id="mybtn" data-toggle="modal" data-target="#exampleModal" name="Paid" value="Paid" onclick=" location.href= '@Url.Action("NoteDetails","Home", new { NoteDetails = Model ,sellprice= Model.notedetail.SellPrice})'"><b>Requested</b></button>
                                                }
                                                else
                                                {
                                                    <button type="submit" class="btn text-uppercase text-center" id="mybtn" data-toggle="modal" data-target="#exampleModal" name="Paid" value="Paid" onclick=" location.href= '@Url.Action("NoteDetails","Home", new { NoteDetails = Model ,sellprice= Model.notedetail.SellPrice})'"><b>download/$@Model.notedetail.SellPrice</b></button>
                                                }




                                            }


                                            <!-- Thanks PopUp -->
                                            @{
                                                if (ViewBag.IsModel == "true")
                                                {
                                                    <script>
                                                        function closeme() {
                                                            var a = document.getElementById("exampleModal").style.display = "none";
                                                        }
                                                    </script>
                                                    <div style="padding-right: 16px; display: block; opacity:100; overflow:visible;" class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        @*<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">*@
                                                        <div class="modal-dialog">

                                                            <div class="row">
                                                                <div class="col-xl-12">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <a type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <img src="~/Content/img/Notes Details/close.png" onclick="closeme()">
                                                                            </a>
                                                                        </div>
                                                                        <div class="model-data">

                                                                            <div class="model-head text-center">
                                                                                <img class="img-fluid" src="~/Content/img/Notes Details/SUCCESS.png">
                                                                                <h2>Thank your for purchasing!</h2>
                                                                            </div>
                                                                            <div class="middel-content text-left">
                                                                                <h3>Dear @ViewBag.Buyer,</h3>
                                                                                <p class="para-1">As this is paid notes-you need to pay to seller @ViewBag.seller offline.We will send him an email that you want to download this note.He may contact you further for payment process completion.</p>
                                                                                <p class="para-2">In Case, you have urgency,<br>Please contact us on +9195538863848.</p>
                                                                                <p class="para-3">Once he recevies the payment and acknowledge us-Seleted notes you can see over my downloads tab for download.</p>
                                                                                <p class="para-4">Have a good day.</p>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                }
                                            }
                                            <!-- Thanks PopUp Ends -->
                                        </div>
                                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-5 margin-top">
                            <div class="row">
                                <div class="col-5 col-sm-5 col-md-5 col-xs-6 left-side-note">
                                    <h5>Institution:</h5>
                                    <h5>Country:</h5>
                                    <h5>Course Name:</h5>
                                    <h5>Course Code:</h5>
                                    <h5>Professor:</h5>
                                    <h5>Number of Pages:</h5>
                                    <h5>Approved Date:</h5>
                                    <h5>Rating:</h5>
                                </div>
                                <div class="col-7 col-sm-7 col-md-7 col-xs-6 right-side-note text-right">
                                    @if (Model.notedetail.InstitutionName != null)
                                    {
                                        <h5>@Model.notedetail.InstitutionName</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }

                                    @if (Model.notedetail.Country != null)
                                    {
                                        <h5>@Model.notedetail.Country</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }

                                    @if (Model.notedetail.Course != null)
                                    {
                                        <h5>@Model.notedetail.Course</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }

                                    @if (Model.notedetail.CourseCode != null)
                                    {
                                        <h5>@Model.notedetail.CourseCode</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }

                                    @if (Model.notedetail.Professor != null)
                                    {
                                        <h5>@Model.notedetail.Professor</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }


                                    @if (Model.notedetail.NumberOfPages != null)
                                    {
                                        <h5>@Model.notedetail.NumberOfPages</h5>
                                    }
                                    else
                                    {
                                        <h5>-</h5>
                                    }


                                    @if (Model.notedetail.PublishedDate == null)
                                    {
                                        <h5>-</h5>
                                    }
                                    else
                                    {
                                        <h5>@Model.notedetail.PublishedDate.Value.ToString("D")</h5>
                                    }

                                    <div class="rate-fa">
                                        @for (double i = 0; i < Model.rating; i++)
                                        {
                                            <i class="fa fa-star giverate"></i>
                                        }
                                        @for (double i = 0; i < (5 - Model.rating); i++)
                                        {
                                            <i class="fa fa-star-o"></i>
                                        }



                                        <i class="numofreview">@Model.review Reviews</i>
                                    </div>
                                </div>
                            </div>
                            <div class="inappropriate">
                                <p>@Model.inappropriat User marked this note as inappropriate</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Detail Section Ends-->

    <div class="content-box-md">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <hr>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Section -->
    <section id="notesdetail-preview">
        
        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-5">
                    <div class="head">
                        <h3>Notes Preview</h3>
                    </div>
                    @if (Model.notedetail.NotePreview != null)
                    {
                        <div id="Iframe-Cicis-Menu-To-Go" class="set-margin-cicis-menu-to-go set-padding-cicis-menu-to-go set-border-cicis-menu-to-go set-box-shadow-cicis-menu-to-go center-block-horiz">
                            <div class="responsive-wrapper
     responsive-wrapper-padding-bottom-90pct" style="-webkit-overflow-scrolling: touch; overflow: auto;">
                                <iframe src="~/Upload/NotePreview/@Model.notedetail.NotePreview">
                                    <p style="font-size: 110%;">
                                        <em>
                                            <strong>ERROR: </strong>
                                            An &#105;frame should be displayed here but your browser version does not support &#105;frames.
                                        </em> Please update your browser to its most recent version and try again, or access the file <a href="http://unec.edu.az/application/uploads/2014/12/pdf-sample.pdf">with this link.</a>
                                    </p>
                                </iframe>
                            </div>
                        </div>
                    }
                    else
                    {

                    }

                </div>
                <div class="col-12 col-sm-12 col-md-12 col-lg-7 margin-top">
                    <div class="head">
                        <h3>Customer Reviews</h3>
                    </div>
                    <div class="customer-reviews">
                        @{
                            if (Model.feedback != null)
                            {
                                foreach (NotesMarketplace.Models.UserFeedback fb in Model.feedback)
                                {
                                    <div class="row">
                                        <div class="col-3 col-sm-3 col-md-2">
                                            @if (fb.UserImage != null)
                                            {
                                                <img src="~/Upload/UserProfilePicture/@fb.UserImage" alt="user" class="img-fluid rounded-circle">
                                            }
                                            else
                                            {
                                                <img src="~/Content/img/DefaultUserImage.png" alt="user" class="img-fluid rounded-circle">
                                            }

                                        </div>
                                        <div class="col-9 col-sm-9 col-md-10">
                                            <h5>@fb.UserName</h5>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="rate-fa">

                                                        @for (double i = 0; i < fb.Rating; i++)
                                                        {
                                                            <i class="fa fa-star giverate"></i>
                                                        }
                                                        @for (double i = 0; i < (5 - fb.Rating); i++)
                                                        {
                                                            <i class="fa fa-star-o"></i>
                                                        }

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <p>@fb.Comment</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <hr>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            else
                            {
                                <div class="row">
                                    <div class="col-12">
                                        <p class="NoRecord">No review yet</p>
                                        </div>
                                </div>
                            }

                    }
                                    </div>
                                </div>
                            </div>
        </div>

    </section>
    <!-- Preview Section Ends -->
    
